"use strict";(self["webpackChunkcashflow"]=self["webpackChunkcashflow"]||[]).push([[639],{4505:function(e,t,l){l.r(t),l.d(t,{default:function(){return Ue}});var a=l(3396);function n(e,t,l,n,o,s){const u=(0,a.up)("HeaderComp"),r=(0,a.up)("GraphicComp"),i=(0,a.up)("ActionComp"),c=(0,a.up)("Resume"),m=(0,a.up)("Movements"),v=(0,a.up)("LayoutComp");return(0,a.wg)(),(0,a.j4)(v,null,{header:(0,a.w5)((()=>[(0,a.Wm)(u)])),resume:(0,a.w5)((()=>[(0,a.Wm)(c,{totalLabel:"Ahorro total",label:o.label,totalAmount:s.totalAmount,amount:o.amount},{graphic:(0,a.w5)((()=>[(0,a.Wm)(r,{amounts:s.amounts,onSelect:s.select},null,8,["amounts","onSelect"])])),action:(0,a.w5)((()=>[(0,a.Wm)(i,{onCreate:s.create},null,8,["onCreate"])])),_:1},8,["label","totalAmount","amount"])])),movements:(0,a.w5)((()=>[(0,a.Wm)(m,{movements:o.movements,onRemove:s.remove},null,8,["movements","onRemove"])])),_:1})}var o=l(8294);const s=e=>((0,a.dD)("data-v-4100357c"),e=e(),(0,a.Cn)(),e),u=s((()=>(0,a._)("h1",null,[(0,a._)("span",null,"Cash"),(0,a.Uk)("Flow")],-1))),r=s((()=>(0,a._)("span",null,null,-1)));function i(e,t,l,n,s,i){return(0,a.wg)(),(0,a.iD)("header",null,[(0,a._)("img",{onClick:t[0]||(t[0]=(...e)=>i.reload&&i.reload(...e)),src:o,alt:"Logo"}),u,r])}var c={methods:{reload(){location.reload()}}},m=l(89);const v=(0,m.Z)(c,[["render",i],["__scopeId","data-v-4100357c"]]);var d=v,p=l(9242),_=l(4870);const h=e=>((0,a.dD)("data-v-5e2d5f45"),e=e(),(0,a.Cn)(),e),g={class:"header"},w={class:"resume"},y={class:"movements"},b=h((()=>(0,a._)("div",{class:"grip"},null,-1))),C=[b],f={class:"body"};var I={__name:"LayoutComp",setup(e){const t=(0,_.iH)(!1);return(e,l)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",g,[(0,a.WI)(e.$slots,"header")]),(0,a._)("div",w,[(0,a.WI)(e.$slots,"resume")]),(0,a._)("div",y,[(0,a._)("div",{class:"head",onClick:l[0]||(l[0]=e=>t.value=!t.value)},C),(0,a.wy)((0,a._)("div",f,[(0,a.WI)(e.$slots,"movements")],512),[[p.F8,t.value]])])],64))}};const D=(0,m.Z)(I,[["__scopeId","data-v-5e2d5f45"]]);var S=D,k=l(7139);const A={class:"graphic"},M={class:"action"};function U(e,t,l,n,o,s){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("p",null,(0,k.zw)(s.labelVisual),1),(0,a._)("h1",null,(0,k.zw)(s.amountCurrency),1),(0,a._)("div",A,[(0,a.WI)(e.$slots,"graphic",{},void 0,!0)]),(0,a._)("div",M,[(0,a.WI)(e.$slots,"action",{},void 0,!0)])])}const x=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"});var H={props:{totalLabel:{type:String},label:{type:String},totalAmount:{type:Number},amount:{type:Number,default:null}},computed:{labelVisual(){return null!==this.label?this.label:this.totalLabel},amountVisual(){return null!==this.amount?this.amount:this.totalAmount},amountCurrency(){return x.format(this.amountVisual)}}};const W=(0,m.Z)(H,[["render",U],["__scopeId","data-v-7071f136"]]);var N=W,$=l.p+"img/trash-icon.bc08e8c5.svg";const F={class:"movement"},V={class:"content"},Z={class:"action"};var R={__name:"MovementComp",props:{id:{type:Number},title:{type:String},description:{type:String},amount:{type:Number}},emits:["remove"],setup(e,{emit:t}){const l=e,n=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}),{id:o,title:s,description:u,amount:r}=(0,_.BK)(l),i=()=>{t("remove",o.value)},c=(0,a.Fl)((()=>n.format(r.value))),m=(0,a.Fl)((()=>r.value<0));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("div",V,[(0,a._)("h4",null,(0,k.zw)((0,_.SU)(s)),1),(0,a._)("p",null,(0,k.zw)((0,_.SU)(u)),1)]),(0,a._)("div",Z,[(0,a._)("img",{src:$,alt:"borrar",onClick:i}),(0,a._)("p",{class:(0,k.C_)([{red:(0,_.SU)(m),green:!(0,_.SU)(m)}])},(0,k.zw)((0,_.SU)(c)),3)])]))}};const B=(0,m.Z)(R,[["__scopeId","data-v-876f724a"]]);var G=B;const L=e=>((0,a.dD)("data-v-6f52da32"),e=e(),(0,a.Cn)(),e),z={class:"movements"},X=L((()=>(0,a._)("h2",{class:"title"}," Historial ",-1))),K={class:"content"};var T={__name:"IndexComp",props:{movements:{type:Array,default:()=>[]}},emits:["remove"],setup(e,{emit:t}){const l=e,{movements:n}=(0,_.BK)(l),o=e=>{t("remove",e)};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",z,[X,(0,a._)("div",K,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,_.SU)(n),(({id:e,title:t,description:l,amount:n})=>((0,a.wg)(),(0,a.j4)(G,{key:e,id:e,title:t,description:l,amount:n,onRemove:o},null,8,["id","title","description","amount"])))),128))])]))}};const j=(0,m.Z)(T,[["__scopeId","data-v-6f52da32"]]);var Y=j,J=l.p+"img/close-icon.db321b12.svg";const O=e=>((0,a.dD)("data-v-2c321f57"),e=e(),(0,a.Cn)(),e),P={class:"modal"},q=O((()=>(0,a._)("p",null," Nuevo movimiento",-1))),E={class:"body"};var Q={__name:"ModalComp",emits:["close"],setup(e,{emit:t}){const l=()=>t("close");return(e,t)=>((0,a.wg)(),(0,a.iD)("div",P,[(0,a._)("div",{class:"head"},[q,(0,a._)("img",{onClick:l,src:J,alt:"cerrar"})]),(0,a._)("div",E,[(0,a.WI)(e.$slots,"default")])]))}};const ee=(0,m.Z)(Q,[["__scopeId","data-v-2c321f57"]]);var te=ee;const le=e=>((0,a.dD)("data-v-3c2c357b"),e=e(),(0,a.Cn)(),e),ae=["onSubmit"],ne={class:"field"},oe=le((()=>(0,a._)("label",null,"Título",-1))),se={class:"field"},ue=le((()=>(0,a._)("label",null,"Monto",-1))),re={class:"field"},ie=le((()=>(0,a._)("label",null,"Descripción",-1))),ce={class:"field"},me={class:"radio-label"},ve=le((()=>(0,a._)("span",null,"Ingreso",-1))),de={class:"radio-label"},pe=le((()=>(0,a._)("span",null,"Gasto",-1))),_e=le((()=>(0,a._)("div",{class:"action"},[(0,a._)("button",null,"Agregar movimiento")],-1)));var he={__name:"ActionComp",emits:["create"],setup(e,{emit:t}){const l=(0,_.iH)(!1),n=(0,_.iH)(""),o=(0,_.iH)(0),s=(0,_.iH)(""),u=(0,_.iH)("Ingreso"),r=()=>{l.value=!l.value,t("create",{title:n.value,description:s.value,amount:"Ingreso"===u.value?o.value:-o.value,time:new Date,id:new Date}),n.value="",s.value="",o.value=0,u.value="Ingreso"};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("button",{onClick:t[0]||(t[0]=e=>l.value=!0)}," Agregar movimiento"),((0,a.wg)(),(0,a.j4)(a.lR,{to:"#app"},[(0,a.wy)((0,a.Wm)(te,{onClose:t[6]||(t[6]=e=>l.value=!1)},{default:(0,a.w5)((()=>[(0,a._)("form",{onSubmit:(0,p.iM)(r,["prevent"])},[(0,a._)("div",ne,[oe,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e)},null,512),[[p.nr,n.value]])]),(0,a._)("div",se,[ue,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e)},null,512),[[p.nr,o.value]])]),(0,a._)("div",re,[ie,(0,a.wy)((0,a._)("textarea",{rows:"4","onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e)},null,512),[[p.nr,s.value]])]),(0,a._)("div",ce,[(0,a._)("label",me,[(0,a.wy)((0,a._)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>u.value=e),value:"Ingreso"},null,512),[[p.G2,u.value]]),ve]),(0,a._)("label",de,[(0,a.wy)((0,a._)("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=e=>u.value=e),value:"Gasto"},null,512),[[p.G2,u.value]]),pe])]),_e],40,ae)])),_:1},512),[[p.F8,l.value]])]))]))}};const ge=(0,m.Z)(he,[["__scopeId","data-v-3c2c357b"]]);var we=ge;const ye=e=>((0,a.dD)("data-v-ec490452"),e=e(),(0,a.Cn)(),e),be=["y1","y2"],Ce=["points"],fe=["x1","x2"],Ie=ye((()=>(0,a._)("p",null," ültimos 30 días ",-1)));var De={__name:"GraphicComp",props:{amounts:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:t}){const l=e,n=(0,_.iH)(!1),o=(0,_.iH)(0);(0,a.YP)(o,(e=>{const l=Math.ceil(e/(300/r.value.length));l<0||l>r.value.length||t("select",r.value[l-1])}));const s=({target:e,touches:t})=>{n.value=!0;const l=e.getBoundingClientRect().width,a=e.getBoundingClientRect().x,s=t[0].clientX;o.value=300*(s-a)/l},u=({target:e,touches:t})=>{n.value=!1,console.log(e,t)},{amounts:r}=(0,_.BK)(l),i=(0,a.Fl)((()=>c(0))),c=e=>{const t=Math.min(...r.value),l=Math.max(...r.value),a=200-(e+Math.abs(t))/((l+Math.abs(t))/200);return`${a}`},m=(0,a.Fl)((()=>{const e=r.value.length;return r.value.reduce(((t,l,a)=>{const n=300/e*(a+1),o=c(l);return console.log(l,o),`${t} ${n},${o}`}),`0, ${c(r.value.length?r.value[0]:0)}`)}));return console.log("enerd"),(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[((0,a.wg)(),(0,a.iD)("svg",{onTouchstart:s,onTouchmove:s,onTouchend:u,viewBox:"0 0 300 200"},[(0,a._)("line",{stroke:"#c4c4c4","stroke-width":"2",x1:"0",y1:(0,_.SU)(i),x2:"300",y2:(0,_.SU)(i)},null,8,be),(0,a._)("polyline",{fill:"none",stroke:"#0689B0","stroke-width":"2",points:(0,_.SU)(m)},null,8,Ce),(0,a.wy)((0,a._)("line",{stroke:"#04b500","stroke-width":"2",x1:o.value,y1:"0",x2:o.value,y2:"200"},null,8,fe),[[p.F8,n.value]])],32)),Ie]))}};const Se=(0,m.Z)(De,[["__scopeId","data-v-ec490452"]]);var ke=Se,Ae={components:{HeaderComp:d,LayoutComp:S,Resume:N,Movements:Y,ActionComp:we,GraphicComp:ke},data(){return{amount:null,label:null,movements:[]}},computed:{amounts(){const e=this.movements.filter((e=>{const t=new Date,l=t.setDate(t.getDate()-30);return e.time>l})).map((e=>e.amount));return e.map(((t,l)=>{const a=e.slice(0,l+1);return a.reduce(((e,t)=>e+t),0)}))},totalAmount(){return this.movements.reduce(((e,t)=>e+t.amount),0)}},mounted(){const e=JSON.parse(localStorage.getItem("movements"));Array.isArray(e)&&(this.movements=e.map((e=>({...e,time:new Date(e.time)}))))},methods:{create(e){this.movements.push(e),this.save()},remove(e){const t=this.movements.findIndex((t=>t.id===e));this.movements.splice(t,1),this.save()},save(){localStorage.setItem("movements",JSON.stringify(this.movements))},select(e){this.amount=e}}};const Me=(0,m.Z)(Ae,[["render",n]]);var Ue=Me}}]);
//# sourceMappingURL=639.4521de45.js.map